<!DOCTYPE html>
<html>
  <head>
    <script>
      'use strict';

      let cursor = [];
      document.onmousemove = handleMouseMove;

      let x = 500;
      let y = 300;

      function cross([x1, y1], [x2, y2]) {
          return x1 * y2 - x2 * y1;
      }

      function ccw([[x1, y1], [x2, y2], [x3, y3]]) {
          x2 -= x1;
          y2 -= y1;
          x3 -= x1;
          y3 -= y1;
          let c = cross([x2, y2], [x3, y3]);
          if (c > 0) return +1;
          if (c < 0) return -1;
          return 0;
      }

      function len([[x1, y1], [x2, y2], [x3, y3]]) {
          return (Math.hypot(x2 - x1, y2 - y1) + Math.hypot(x3 - x2, y3 - y2)) / 10;
      }

      function updateXY([[x1, y1], [x2, y2], [x3, y3]]) {
          let c = ccw([[x1, y1], [x2, y2], [x3, y3]]);
          let d = len([[x1, y1], [x2, y2], [x3, y3]]);
          if (c == 1) {
              x -= d;
          } else if (c == -1) {
              x += d;
          }
      }

      function handleMouseMove(ev) {
          cursor.push([ev.clientX, -ev.clientY]);
          if (cursor.length > 3) cursor.shift();
          if (cursor.length == 3) updateXY(cursor);
          
          let svg = document.getElementById('svg');
          svg.innerHTML = `<circle cx="${x}" cy="${y}" r="10"></circle>`;
      }
    </script>
  </head>
  <body>
    <svg id="svg" width="1000" height="480">
      <circle cx="500" cy="300" r="10"></circle>
    </svg>
  </body>
</html>
